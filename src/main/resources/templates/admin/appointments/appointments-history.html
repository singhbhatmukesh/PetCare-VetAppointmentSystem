<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Manage Appointments</title>

<!-- Bootstrap -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
	rel="stylesheet">

<!-- Admin CSS -->
<link href="/css/admin-home.css" rel="stylesheet">
</head>
<body>

	<!-- Header -->
	<div th:replace="~{admin/admin-fragments::header}"></div>

	<div class="admin-wrapper">

		<!-- Sidebar -->
		<div th:replace="~{admin/admin-fragments::sidebar}"></div>

		<!-- Main Content -->
		<div class="main-content">

			<!-- Navbar -->
			<div th:replace="~{admin/admin-fragments::navbar}"></div>

			<!-- Page Content -->
			<div class="container-fluid">


				<!-- Page Header -->
				<div class="d-flex justify-content-between align-items-center mb-3">
					<h4 class="mb-0">
						<i class="bi bi-calendar-check me-2"></i>Appointments History
					</h4>

					<div class="d-flex gap-2">
						<!-- Back Button -->
						<a th:href="@{/admin/appointments}"
							class="btn btn-outline-secondary"> <i
							class="bi bi-arrow-left me-1"></i> Back
						</a>
					</div>
				</div>



				<!-- Success Message -->
				<div th:if="${success}" class="alert alert-success text-center">
					<span th:text="${success}"></span>
				</div>

				<!-- If no appointments -->
				<div th:if="${#lists.isEmpty(appointments)}"
					class="alert alert-info text-center">
					<p class="mb-2">
						<i class="bi bi-info-circle me-1"></i> No History available.
					</p>

				</div>

				<!-- Appointment Table -->
				<div th:if="${!#lists.isEmpty(appointments)}" class="card shadow-sm">

					<div class="card-body p-0">
						<table class="table table-hover mb-0 align-middle">
							<thead class="table-light">
								<tr>
									<th>#</th>
									<th>Date</th>
									<th>Time</th>
									<th>Pet</th>
									<th>Booked By</th>
									<th>Vet</th>
									<th>Status</th>
								</tr>
							</thead>

							<tbody>
								<tr th:each="appt, stat : ${appointments}">
									<td th:text="${stat.count}">1</td>

									<td th:text="${appt.date}">2025-01-01</td>
									<td><span
										th:text="${#temporals.format(appt.time, 'hh:mm a')}"></span></td>


									<td th:text="${appt.pet.name}">Buddy</td>

									<!-- Booked By (User) -->
									<td th:text="${appt.user != null ? appt.user.name : 'Admin'}">
										Mukesh</td>

									<td th:text="${appt.vet.name}">Dr. Sharma</td>

									<td><span class="badge" th:text="${appt.status}"
										th:classappend="
            ${appt.status == 'Completed'} ? 'bg-success' : 'bg-danger'">
									</span></td>


								</tr>
							</tbody>

						</table>

					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Footer -->
	<div th:replace="~{admin/admin-fragments::footer}"></div>
	<div th:replace="~{admin/admin-fragments::sidebar-js}"></div>

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
