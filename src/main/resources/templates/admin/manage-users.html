<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>Manage Users</title>

<!-- Bootstrap -->
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css"
	rel="stylesheet">
<link
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css"
	rel="stylesheet">

<!-- Admin CSS -->
<link href="/css/admin-home.css" rel="stylesheet">
</head>
<body>

	<!-- Header -->
	<div th:replace="~{admin/admin-fragments::header}"></div>

	<div class="admin-wrapper">

		<!-- Sidebar -->
		<div th:replace="~{admin/admin-fragments::sidebar}"></div>

		<!-- Main Content -->
		<div class="main-content">
		
		<!-- Top Bar -->
    <div th:replace="~{admin/admin-fragments::navbar}"></div>

			<!-- Page Content -->
			<div class="container-fluid">



				<div class="d-flex justify-content-between align-items-center mb-3">
					<h4 class="mb-0">Manage Users</h4>

					<a th:href="@{/admin/users/createUsers}" class="btn btn-success">
						<i class="bi bi-person-plus me-1"></i> Create User
					</a>
				</div>


				<div class="card shadow-sm">
					<div class="card-body p-0">
						<!-- Success Message -->
						<div th:if="${success}"
							class="alert alert-success alert-dismissible fade show">
							<i class="bi bi-check-circle me-2"></i> <span
								th:text="${success}"></span>
							<button type="button" class="btn-close" data-bs-dismiss="alert"></button>
						</div>


						<table class="table table-hover mb-0">
							<thead class="table-secondary">
								<tr>
									<th>#</th>
									<th>Name</th>
									<th>Email</th>
									<th>Status</th>
									<th class="text-center">Actions</th>
								</tr>
							</thead>
							<tbody>
								<!-- Thymeleaf version (use later) -->

								<tr th:each="user, stat : ${users}">
									<td th:text="${currentPage * pageSize + stat.count}"></td>
									<td th:text="${user.name}"></td>
									<td th:text="${user.email}"></td>

									<!--  
                                <td>
                                    <span th:classappend="${user.enabled} ? 'bg-success' : 'bg-danger'"
                                          class="badge"
                                          th:text="${user.enabled} ? 'Active' : 'Disabled'">
                                    </span>
                                </td>-->

									<td><span class="badge bg-success" th:text="Active">
									</span></td>
									<td class="text-center">
										<!-- Edit --> <a
										th:href="@{/admin/users/editUser/{id}(id=${user.id})}"
										class="btn btn-sm btn-outline-warning me-1" title="Edit">
											<i class="bi bi-pencil-square"></i>
									</a> <!-- Block --> <a
										th:href="@{/admin/users/block/{id}(id=${user.id})}"
										class="btn btn-sm btn-outline-secondary me-1" title="Block">
											<i class="bi bi-slash-circle"></i>
									</a> <!-- Delete --> <a
										th:href="@{/admin/users/deleteUser/{id}(id=${user.id})}"
										class="btn btn-sm btn-outline-danger" title="Delete"
										>
											<i class="bi bi-trash"></i>
									</a>
									</td>

								</tr>

							</tbody>
						</table>

						<nav class="mt-3">
							<ul class="pagination justify-content-end mb-0">

								<!-- Previous -->
								<li class="page-item"
									th:classappend="${currentPage == 0} ? 'disabled'"><a
									class="page-link"
									th:href="@{/admin/users(page=${currentPage - 1})}">
										Previous </a></li>

								<!-- Page Numbers -->
								<li class="page-item"
									th:each="i : ${#numbers.sequence(0, totalPages - 1)}"
									th:classappend="${i == currentPage} ? 'active'"><a
									class="page-link" th:href="@{/admin/users(page=${i})}"
									th:text="${i + 1}"> </a></li>

								<!-- Next -->
								<li class="page-item"
									th:classappend="${currentPage + 1 == totalPages} ? 'disabled'">
									<a class="page-link"
									th:href="@{/admin/users(page=${currentPage + 1})}"> Next </a>
								</li>

							</ul>
						</nav>


					</div>
				</div>

			</div>
		</div>
	</div>

	<!-- Footer -->
	<div th:replace="~{admin/admin-fragments::footer}"></div>
	<div th:replace="~{admin/admin-fragments::sidebar-js}"></div>
	

	<script
		src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
